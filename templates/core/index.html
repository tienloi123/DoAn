{% extends 'partials/base.html' %}
{% load static %}
 {% block content %}


    <main>

      <!-- Main jumbotron for a primary marketing message or call to action -->
	  <div class="slider-wrapper my-40 my-sm-25 float-left w-100">
	  	<div class="container">
		<div class="ttloading-bg"></div>
	  	<div class="slider slider-for owl-carousel">
			<div >
				<a href="#">
					<img src="{% static 'img/slider/Slide1.jpg' %}" alt="" height="800" width="1600"/>
				</a>
				<div class="slider-content-wrap center effect_top" style="margin-top: 300px;">
					<div class="slider-button  text-uppercase float-left w-100"><a href=" #">Shop Now</a></div>
				</div>

			</div>
			<div >
				<a href="#">
					<img src="{% static 'img/slider/sample-10.jpg' %}" alt="" height="800" width="1600"/>
				</a>

			</div>
			<div >
				<a href="#">
					<img src="{% static 'img/slider/sample-01.jpg' %}" alt="" height="800" width="1600"/>
				</a>
				<div class="slider-content-wrap center effect_top">
				  <div class="slider-title mb-20 text-capitalize float-left w-100">our specials</div>
				  <div class="slider-subtitle mb-50 text-capitalize float-left w-100">fashion trend</div>
				  <div class="slider-button text-uppercase float-left w-100"><a href=" #">Shop Now</a></div>
				</div>
			</div>
			<div>
				<a href="#">
					<img src="{% static 'img/slider/sample-02.jpg' %}" alt="" height="800" width="1600"/>
				</a>
				<div class="slider-content-wrap center effect_bottom">
				  <div class="slider-title mb-20 text-capitalize float-left w-100">about us</div>
				  <div class="slider-subtitle mb-50 text-capitalize float-left w-100">fashion style</div>
				  <div class="slider-button text-uppercase float-left w-100"><a href=" #">Shop Now</a></div>
				</div>
			</div>
	  </div>
	    </div>
	  </div>

			<div class="main-content">
          	<div id="ttcmsbanner" class="ttcmsbanner my-40 my-sm-25">
				<div class="ttbannerblock container text-center">
					<div class="row">
					  <div class="ttbanner1 ttbanner col-sm-6 col-xs-6 left-to-right hb-animate-element">
						<div class="ttbanner-img"><a href="#"><img src="{% static 'img/banner/bannemoi.jpg' %}" alt="cms-01" height="600" width="630"></a></div>
						  <div class="ttbanner-inner d-inline-block align-top float-none">
							<div class="ttbanner-desc float-left w-100">
								<h2 class="ttbanner-heading text-uppercase float-left w-100">Womens</h2>
								<span class="title text-uppercase float-left w-100 pb-3">collection</span>
								<span class="subtitle float-left w-100 py-20">Et harum quidem rerum facilis est et expedita m libero tempore, cum solut</span>
								<span class="shop-now float-left w-100"><a href="#" class="d-inline-block align-top float-none btn-primary">Shop Now</a></span>							</div>
						 </div>
					  </div>
						  <div class="ttbanner2 ttbanner col-sm-6 col-xs-6 right-to-left hb-animate-element">
                                                      <div class="ttbanner-img"><a href="#"><img src="{% static 'img/banner/bannenam.jpg' %}" alt="cms-02" height="600" width="630"></a></div>
							<div class="ttbanner-inner d-inline-block align-top float-none">
							  <div class="ttbanner-desc">
								<h2 class="ttbanner-heading text-uppercase">Men's</h2>
								<span class="title text-uppercase float-left w-100 pb-3">collection</span>
								<span class="subtitle float-left w-100 py-20">Et harum quidem rerum facilis est et expedita m libero tempore, cum solut</span>
								<span class="shop-now float-left w-100"><a href="#" class="d-inline-block align-top float-none btn-primary">Shop Now</a></span>							  </div>
							</div>
						 </div>
					</div>
				</div>
			</div>
			<div id="main">
			<div id="hometab" class="home-tab my-40 my-sm-25 bottom-to-top hb-animate-element">
			</div>
			<div id="ttcmstestimonial" class="my-40 my-sm-25 bottom-to-top hb-animate-element">
			<div class="tttestimonial-content container">
				<div class="tttestimonial-inner">
				<div class="tttestimonial owl-carousel">
				<div>
				<div class="testimonial-block">
					<div class="testimonial-image"><img alt="" src="{% static 'img/banner/user1.jpg' %}" height="120" width="120"/></div>
					<div class="testimonial-content">
					<div class="testimonial-desc">
					<p>Duis faucibus enim vitae nunc molestie, nec facilisis arcu pulvinar. Nullam mattis arcu convallis, bibendum dui ac, laoreet est.Vivamus interdum egastas rutrum. Quisque laoreet ante sed placerat imperdiet.
					</p>
					</div>
					<div class="testimonial-user-title">
					<h4>John Duff</h4>
					<div class="user-designation">CEO</div>
					</div>
					</div>
				</div>
				</div>
				<div>
				<div class="testimonial-block">
					<div class="testimonial-image"><img alt="" src="{% static 'img/banner/user2.jpg' %}" height="120" width="120"/></div>
					<div class="testimonial-content">
					<div class="testimonial-desc">
					<p>Duis faucibus enim vitae nunc molestie, nec facilisis arcu pulvinar. Nullam mattis arcu convallis, bibendum dui ac, laoreet est.Vivamus interdum egastas rutrum. Quisque laoreet ante sed placerat imperdiet.
					</p>
					</div>
					<div class="testimonial-user-title">
					<h4>Nazli dof</h4>
					<div class="user-designation">Marketing Manager</div>
					</div>
					</div>
				</div>
				</div>
				<div>
				<div class="testimonial-block">
					<div class="testimonial-image"><img alt="" src="{% static 'img/banner/user3.jpg' %}" height="120" width="120"/></div>
					<div class="testimonial-content">
					<div class="testimonial-desc">
					<p>Duis faucibus enim vitae nunc molestie, nec facilisis arcu pulvinar. Nullam mattis arcu convallis, bibendum dui ac, laoreet est.Vivamus interdum egastas rutrum. Quisque laoreet ante sed placerat imperdiet.
					</p>
					</div>
					<div class="testimonial-user-title">
					<h4>Aly Vefa</h4>
					<div class="user-designation">Sales Exuctive</div>
					</div>
					</div>
				</div>
				</div>
				</div>
				</div>
			  </div>
			</div>
			<div id="ttcmssubbanner" class="ttcmssubbanner my-40 my-sm-25 bottom-to-top hb-animate-element">
  <div class="ttbannerblock container">
    <div class="row">
      <div class="ttbanner1 ttbanner col-sm-6 col-xs-6">
        <div class="ttbanner-img"><a href="#"><img src="{% static 'img/banner/cms-03.jpg' %}" alt="cms-03" height="600" width="400"></a></div>
        <div class="ttbanner-inner">
          <div class="ttbanner-desc text-center">
            <span class="title text-uppercase">summer shop</span>
            <span class="subtitle text-uppercase py-20">up to 70% off</span>
            <span class="shop-now text-capitalize"><a href="#" class="btn-primary">shop now</a></span>          </div>
        </div>
      </div>
      <div class="ttbanner2 ttbanner col-sm-6">
        <div class="ttbanner-img"><a href="#"><img src="{% static 'img/banner/cms-04.jpg' %}" alt="cms-04" height="600" width="400"></a></div>
        <div class="ttbanner-inner">
          <div class="ttbanner-desc text-center">
            <span class="title text-uppercase">winter shop</span>
            <span class="subtitle text-uppercase py-20">up to 70% off</span>
            <span class="shop-now text-capitalize"><a href="#" class="btn-primary">shop now</a></span>          </div>
        </div>
      </div>
    </div>
  </div>
</div>
			<div id="ttspecial" class="ttspecial my-40 bottom-to-top hb-animate-element">
			<div class="container">
					<div class="row">
							<div class="tt-title d-inline-block float-none w-100 text-center">special products</div>
							<div class="ttspecial-content products grid owl-carousel">
									{% for p in products %}
							<div class="product-layouts">

								<div class="product-thumb">
									<div class="image zoom">
										<a href="#">
											<img src="{{ p.image.url }}" alt="01" height="501" width="385"/>
											<img src="{% static 'img/products/kinh.jpeg' %}" alt="02" class="second_image img-responsive" height="501" width="385"/>										</a>
										<div class="product-badges product-badges-position product-badges-mrg">
											<span class="hot-badge">-{{ p.get_precentage|floatformat:0 }}%</span>
										</div>
									</div>
									<div class="thumb-description">
										<div class="caption">
											<h4 class="product-title text-capitalize"><a href="product-details.html">{{ p.title }}</a></h4>
										</div>
										<div class="rating">
											<div class="product-ratings d-inline-block align-middle">
												<span class="fa fa-stack"><i class="material-icons">star</i></span>
											   <span class="fa fa-stack"><i class="material-icons">star</i></span>
											   <span class="fa fa-stack"><i class="material-icons">star</i></span>
											   <span class="fa fa-stack"><i class="material-icons off">star</i></span>
											   <span class="fa fa-stack"><i class="material-icons off">star</i></span>									      </div>
								      </div>
										<div class="price">

										</div>
                                        <div>
											<span>By<a href="vendor-details-1.html">{{p.vendor.title}}</a></span>
										</div>
										<div>

										</div>
										<div class="button-wrapper">
										<div class="button-group text-center">
											<span id="current-product-price-{{ p.id }}">{{ p.price }}</span>
											<span class="old-price">${{ p.old_price }}</span>
											<input type="hidden" value="{{ p.stock_count }}"  class="product-stock-{{ p.id }}">
											<input type="hidden" value="1" id="product-quantity" class="product-quantity-{{ p.id }}">
											<input type="hidden" value="{{ p.pid }}"  class="product-pid-{{ p.id }}">
											<input type="hidden" value="{{ p.image.url }}"  class="product-image-{{ p.id }}">
											<input type="hidden" value="{{ p.price }}" id="product-price">
											<input type="hidden" value="{{ p.id }}"  class="product-id-{{ p.id }}">
											<input type="hidden" value="{{ p.title }}"  class="product-title-{{ p.id }}">




												<button type="submit" class="add-to-cart-btn-btn-btn" data-index="{{ p.id }}" id="add-to-cart-btn-btn-btn-{{ p.id }}"><i class="material-icons">shopping_cart</i><span>Add to cart</span></button>
												<button type="submit" class="btn btn-primary btn-wishlist add-to-wishlist" data-product-item="{{p.id}}"><i class="material-icons" >favorite</i><span>wishlist</span></button>
												<button type="button" class="btn btn-primary btn-compare"><i class="material-icons">equalizer</i><span>Compare</span></button>
												<a href="{% url 'core:product-detail' p.pid %}"><button type="button" class=""  data-toggle="modal" data-target="#product_view"><i class="material-icons">visibility</i><span>Quick View</span></button></a>

										</div>
									  </div>
									</div>
								</div>
							</div>

							{% endfor %}
							</div>
					</div>
			</div>
			</div>
				<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>

				<script>
    $(document).ready(function(){
        $(document).on("click", ".add-to-wishlist", function() {
            let product_id = $(this).attr("data-product-item");
            let this_val = $(this);

            console.log("ID is :", product_id);


            $.ajax({
                url: "/add-to-wishlist",
                data: {
                    "id": product_id

                },
                dataType: "json",
                beforeSend: function() { // Thêm dấu ngoặc đơn ở đây
                    console.log("adding");
                },
                success: function(response) { // Thêm tham số 'response' ở đây
                    this_val.html("✔");
                    if (response.bool === true) { // Sửa thành 'response' thay vì 'reponse'
                        console.log("added");
                    }
                }
            });
        });
    });
</script>

			<div id="ttsmartblog" class="my-40 my-sm-25 bottom-to-top hb-animate-element">
				<div class="tt-title d-inline-block float-none w-100 text-center text-capitalize">latest news</div>
				<div class="container">
				<div class="row">
				<div class="smartblog-content owl-carousel">
					<div class="ttblog">
					<div class="item">
						<div class="ttblog_image_holder">
							<a href="#">
								<img src="{% static 'img/banner/blog-01.jpg' %}" alt="blog-01" width="415" height="269">							</a>
							<span class="blogicons">
                                        <a title="Click to view Full Image" href="{% static 'img/banner/blog-01.jpg' %}" data-lightbox="example-set" class="icon zoom"><i class="material-icons">search</i></a>							</span>					  </div>
						<div class="blog-content-wrap float-left w-100">
						<div class="blog_inner">
							<h4 class="blog-title"><span>Share the Love</span></h4>
							<div class="blog-desc">Lorem ipsum dolor sit amet, consectetur adipiscing elit.</div>
							<div class="read-more text-capitalize">
								<a title="Click to view Read More" class="readmore">read more</a>							</div>
						</div>
						</div>
					</div>
					</div>
					<div class="ttblog">
					<div class="item">
						<div class="ttblog_image_holder">
							<a href="#">
								<img src="{% static 'img/banner/blog-02.jpg' %}" alt="blog-02" width="415" height="269">							</a>
								<span class="blogicons">
                                        <a title="Click to view Full Image" href="{% static 'img/banner/blog-02.jpg' %}" data-lightbox="example-set" class="icon zoom"><i class="material-icons">search</i></a>							</span>					  </div>
						<div class="blog-content-wrap float-left w-100">
						<div class="blog_inner">
							<h4 class="blog-title"><span>Upon of seasons earth</span></h4>
							<div class="blog-desc">Lorem ipsum dolor sit amet, consectetur adipiscing elit.</div>
							<div class="read-more text-capitalize">
								<a title="Click to view Read More" class="readmore">read more</a>							</div>
						</div>
						</div>
					</div>
					</div>
					<div class="ttblog">
					<div class="item">
						<div class="ttblog_image_holder">
							<a href="#">
								<img src="{% static 'img/banner/blog-03.jpg' %}" alt="blog-03" width="415" height="269">							</a>
																<span class="blogicons">
                                        <a title="Click to view Full Image" href="{% static 'img/banner/blog-03.jpg' %}" data-lightbox="example-set" class="icon zoom"><i class="material-icons">search</i></a>							</span>					  </div>
						<div class="blog-content-wrap float-left w-100">
						<div class="blog_inner">
							<h4 class="blog-title"><span>From Now we are certified web</span></h4>
							<div class="blog-desc">Lorem ipsum dolor sit amet, consectetur adipiscing elit.</div>
							<div class="read-more text-capitalize">
								<a title="Click to view Read More" class="readmore">read more</a>							</div>
						</div>
						</div>
					</div>
					</div>
					<div class="ttblog">
					<div class="item">
						<div class="ttblog_image_holder">
							<a href="#">
								<img src="{% static 'img/banner/blog-04.jpg' %}" alt="blog-04" width="415" height="269">							</a>
								<span class="blogicons">
                                        <a title="Click to view Full Image" href="{% static 'img/banner/blog-04.jpg' %}" data-lightbox="example-set" class="icon zoom"><i class="material-icons">search</i></a>							</span>					  </div>
						<div class="blog-content-wrap float-left w-100">
						<div class="blog_inner">
							<h4 class="blog-title"><span>Viderer voluptatum te eum</span></h4>
							<div class="blog-desc">Lorem ipsum dolor sit amet, consectetur adipiscing elit.</div>
							<div class="read-more text-capitalize">
								<a title="Click to view Read More" class="readmore">read more</a>							</div>
						</div>
						</div>
					</div>
					</div>
					<div class="ttblog">
					<div class="item">
						<div class="ttblog_image_holder">
							<a href="#">
								<img src="{% static 'img/banner/blog-05.jpg' %}" alt="blog-05" width="415" height="269">							</a>
								<span class="blogicons">
                                        <a title="Click to view Full Image" href="{% static 'img/banner/blog-05.jpg' %}" data-lightbox="example-set" class="icon zoom"><i class="material-icons">search</i></a>							</span>					  </div>
						<div class="blog-content-wrap float-left w-100">
						<div class="blog_inner">
							<h4 class="blog-title"><span>Share the Love</span></h4>
							<div class="blog-desc">Lorem ipsum dolor sit amet, consectetur adipiscing elit.</div>
							<div class="read-more text-capitalize">
								<a title="Click to view Read More" class="readmore">read more</a>							</div>
						</div>
						</div>
					</div>
					</div>
				</div>
				</div>
				</div>
			</div>
			<div id="ttbrandlogo" class="my-40 my-sm-25 bottom-to-top hb-animate-element">
				<div class="container">
				<div class="tt-brand owl-carousel">
					<div class="item">
						<a href="#"><img src="{% static 'img/logos/brand-logo-01.png' %}" alt="brand-logo-01" width="140" height="100"></a>
					</div>
					<div class="item">
						<a href="#"><img src="{% static 'img/logos/brand-logo-02.png' %}" alt="brand-logo-02" width="140" height="100"></a>
					</div>
					<div class="item">
						<a href="#"><img src="{% static 'img/logos/brand-logo-03.png' %}" alt="brand-logo-03" width="140" height="100"></a>
					</div>
					<div class="item">
						<a href="#"><img src="{% static 'img/logos/brand-logo-04.png' %}" alt="brand-logo-04" width="140" height="100"></a>
					</div>
					<div class="item">
						<a href="#"><img src="{% static 'img/logos/brand-logo-05.png' %}" alt="brand-logo-05" width="140" height="100"></a>
					</div>
					<div class="item">
						<a href="#"><img src="{% static 'img/logos/brand-logo-06.png' %}" alt="brand-logo-06" width="140" height="100"></a>
					</div>
				</div>
				</div>
			</div>

			</div>
			</div>
		<style>
		.hot-badge {
    position: absolute;
    top: 0;
    left: 0;
    background-color: pink;
    color: white;
    padding: 5px 10px;
    border-radius: 5px;
    font-size: 14px;
    font-weight: light;
}
	</style>
		<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
		<script>
                                    $(document).ready(function(){
                                        $(".add-to-cart-btn-btn-btn").on("click", function(){
                                            event.preventDefault(); // Ngăn chặn sự kiện click lan ra
                                            let this_val = $(this);
                                            let index = this_val.attr("data-index");

                                            let quantity = $(".product-quantity-" + index).val();
                                            let product_title = $(".product-title-" + index).val();

                                            let product_id = $(".product-id-" + index).val();
                                            let product_price = $("#product-price").val();

                                            let product_pid = $(".product-pid-" + index).val();
                                            let product_image = $(".product-image-" + index).val();
                                            let product_stock = $(".product-stock-" + index).val();

											console.log("product_pid:", product_pid);
                                            console.log("quantity:", quantity);
                                            console.log("Title:", product_title);
                                            console.log("Price:", product_price);
                                            console.log("Id:", product_id);
                                            console.log("Pid:", product_pid);
                                            console.log("Image:", product_image);
                                            console.log("Index:", index);
                                            console.log("stock:", product_stock);
                                            console.log("Current Element:", this_val);

                                            $.ajax({
                                                url: '/add-to-cart',
                                                data:{
                                                    'id': product_id,
                                                    'pid': product_pid,
                                                    'image': product_image,
                                                    'qty': quantity,
                                                    'title': product_title,
                                                    'price': product_price,
                                                    'stock': product_stock,
                                                },
                                                dataType: 'json',
                                                beforeSend: function(){
                                                    console.log("Adding Product to cart...");
                                                },
                                                success: function(response){
                                                    this_val.html("✔")
                                                    console.log("Added Product to Cart!");
                                                    $(".cart-items-count").text(response.totalcartitems);
                                                }
                                            });
                                        });
                                    });
                                </script>
														<script>
document.addEventListener("DOMContentLoaded", function() {
    {% for p in products %}
        var addToCartButton = document.getElementById("add-to-cart-btn-btn-btn-{{ p.id }}");
        var stockCount = {{ p.stock_count }};
        var stockCountElement = document.getElementById("stock-count");

        if (stockCount === 0) {
            addToCartButton.disabled = true; // Vô hiệu hóa nút
            stockCountElement.textContent = "Sold out"; // Thay đổi nội dung của thẻ h5
            stockCountElement.style.color = "red";
            stockCountElement.style.fontWeight = "bold";
        }
    {% endfor %}
});

</script>

    </main>
 {% endblock content %}

